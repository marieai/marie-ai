"use strict";(self.webpackChunkmare_ai=self.webpackChunkmare_ai||[]).push([[3065],{28453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>l});var r=t(96540);const i={},a=r.createContext(i);function s(e){const n=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),r.createElement(a.Provider,{value:n},e.children)}},34494:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>s,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"extract/query-plan","title":"Query Plan","description":"The query plan is a tree structure that represents the steps that the query engine will take to execute a query. The","source":"@site/docs/extract/query-plan.md","sourceDirName":"extract","slug":"/extract/query-plan","permalink":"/docs/extract/query-plan","draft":false,"unlisted":false,"editUrl":"https://github.com/marieai/marie-ai/tree/main/docs/docs/extract/query-plan.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Extract/Parsing","permalink":"/docs/category/extractparsing"},"next":{"title":"Marie Scheduler: Execution and Scheduling Behavior","permalink":"/docs/extract/scheduler"}}');var i=t(74848),a=t(28453);const s={sidebar_position:1},l="Query Plan",c={},d=[{value:"Query Plan Types",id:"query-plan-types",level:2},{value:"Query Plan Structure",id:"query-plan-structure",level:2},{value:"Query Plan Generation",id:"query-plan-generation",level:2},{value:"Query Plan Execution",id:"query-plan-execution",level:2},{value:"Node Types",id:"node-types",level:2},{value:"Query Plan Engine",id:"query-plan-engine",level:2}];function o(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"query-plan",children:"Query Plan"})}),"\n",(0,i.jsx)(n.p,{children:"The query plan is a tree structure that represents the steps that the query engine will take to execute a query. The\nquery plan is generated by the query optimizer, which is responsible for finding the most efficient way to extract the\ndata requested by the query."}),"\n",(0,i.jsx)(n.h2,{id:"query-plan-types",children:"Query Plan Types"}),"\n",(0,i.jsxs)(n.p,{children:["There are two main types of query plans: ",(0,i.jsx)(n.code,{children:"Trivial"})," and ",(0,i.jsx)(n.code,{children:"Non-Trivial"}),".\n",(0,i.jsx)(n.code,{children:"Trivial"})," query plans represent the high-level steps that the extract engine will take to execute,\nwhile ",(0,i.jsx)(n.code,{children:"Non-Trivial"})," plans represent the low-level steps that the extract engine will take to execute."]}),"\n",(0,i.jsx)(n.h2,{id:"query-plan-structure",children:"Query Plan Structure"}),"\n",(0,i.jsx)(n.p,{children:"The query plan is a tree structure that consists of nodes and edges. Each node represents a step in the query execution\nprocess."}),"\n",(0,i.jsx)(n.h2,{id:"query-plan-generation",children:"Query Plan Generation"}),"\n",(0,i.jsxs)(n.p,{children:["Plans can be generated via ",(0,i.jsx)(n.code,{children:"Serial Plan Generation"})," or ",(0,i.jsx)(n.code,{children:"Parallel Plan Generation"})," strategies.\n",(0,i.jsx)(n.code,{children:"Trivial"})," plans are generated via ",(0,i.jsx)(n.code,{children:"Serial Plan Generation"})," strategy, while ",(0,i.jsx)(n.code,{children:"Non-Trivial"})," plans are generated via\n",(0,i.jsx)(n.code,{children:"Parallel Plan Generation"})," strategy."]}),"\n",(0,i.jsx)(n.h2,{id:"query-plan-execution",children:"Query Plan Execution"}),"\n",(0,i.jsx)(n.p,{children:"The query plan is executed by the query engine, which is responsible for executing the steps in the plan in the correct\norder."}),"\n",(0,i.jsx)(n.h2,{id:"node-types",children:"Node Types"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"Trivial"})," and ",(0,i.jsx)(n.code,{children:"Non-Trivial"})," query plans consist of different types of nodes. Most of the trivial nodes can be executed\nvia a single pipeline step."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Chunker","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Splits the input data into chunks. (Pages,Frames)"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Annotator","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Adds metadata(ROI, Embeddings) or labels to text that can be used in downstream tasks like matching, chunking, or\nextracting."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Matcher","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Splits the input data into chunks. (MatchSections, PageSpan)"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Extractor","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Extracts the data from the input chunk. (Rows, Table, KeyValue, List, Section ...)"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Evaluator","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Evaluates the extracted data. (Filter, Sort, Transform, ...)"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Aggregator","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Gathers and combines data or content from multiple sources into a single, unified view or dataset."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Collator","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Organizes and arranges data or information in a systematic way, often focusing on sorting, aligning, or\nstructuring items."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Validator","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Validates the extracted data. (Schema, Type, ...)"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Materializer","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Materializes the extracted data into a final output. (S3, File, ...)"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"query-plan-engine",children:"Query Plan Engine"}),"\n",(0,i.jsx)(n.p,{children:"The query plan engine is responsible for executing the query plan. The engine is responsible for executing the steps in\nthe plan in the correct order and ensuring that the data is extracted correctly."})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}}}]);