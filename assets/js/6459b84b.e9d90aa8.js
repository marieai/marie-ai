"use strict";(self.webpackChunkmare_ai=self.webpackChunkmare_ai||[]).push([[6459],{16262:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>D,contentTitle:()=>A,default:()=>C,frontMatter:()=>P,metadata:()=>s,toc:()=>T});const s=JSON.parse('{"id":"getting-started/installation","title":"Installation","description":"Marie comes with multiple installation options, enabling different feature sets.","source":"@site/docs/getting-started/installation.mdx","sourceDirName":"getting-started","slug":"/getting-started/installation","permalink":"/docs/getting-started/installation","draft":false,"unlisted":false,"editUrl":"https://github.com/marieai/marie-ai/tree/main/docs/docs/getting-started/installation.mdx","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Getting Started","permalink":"/docs/category/getting-started"},"next":{"title":"Troubleshooting","permalink":"/docs/getting-started/troubleshooting"}}');var t=i(74848),r=i(28453),l=i(96540),a=i(18215),o=i(23104),c=i(56347),d=i(205),h=i(57485),u=i(31682),p=i(70679);function m(e){return l.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,l.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function x(e){const{values:n,children:i}=e;return(0,l.useMemo)((()=>{const e=n??function(e){return m(e).map((({props:{value:e,label:n,attributes:i,default:s}})=>({value:e,label:n,attributes:i,default:s})))}(i);return function(e){const n=(0,u.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,i])}function g({value:e,tabValues:n}){return n.some((n=>n.value===e))}function j({queryString:e=!1,groupId:n}){const i=(0,c.W6)(),s=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,h.aZ)(s),(0,l.useCallback)((e=>{if(!s)return;const n=new URLSearchParams(i.location.search);n.set(s,e),i.replace({...i.location,search:n.toString()})}),[s,i])]}function v(e){const{defaultValue:n,queryString:i=!1,groupId:s}=e,t=x(e),[r,a]=(0,l.useState)((()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!g({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const i=n.find((e=>e.default))??n[0];if(!i)throw new Error("Unexpected error: 0 tabValues");return i.value}({defaultValue:n,tabValues:t}))),[o,c]=j({queryString:i,groupId:s}),[h,u]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[i,s]=(0,p.Dv)(n);return[i,(0,l.useCallback)((e=>{n&&s.set(e)}),[n,s])]}({groupId:s}),m=(()=>{const e=o??h;return g({value:e,tabValues:t})?e:null})();(0,d.A)((()=>{m&&a(m)}),[m]);return{selectedValue:r,selectValue:(0,l.useCallback)((e=>{if(!g({value:e,tabValues:t}))throw new Error(`Can't select invalid tab value=${e}`);a(e),c(e),u(e)}),[c,u,t]),tabValues:t}}var f=i(92303);const y={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function b({className:e,block:n,selectedValue:i,selectValue:s,tabValues:r}){const l=[],{blockElementScrollPositionUntilNextRender:c}=(0,o.a_)(),d=e=>{const n=e.currentTarget,t=l.indexOf(n),a=r[t].value;a!==i&&(c(n),s(a))},h=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const i=l.indexOf(e.currentTarget)+1;n=l[i]??l[0];break}case"ArrowLeft":{const i=l.indexOf(e.currentTarget)-1;n=l[i]??l[l.length-1];break}}n?.focus()};return(0,t.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.A)("tabs",{"tabs--block":n},e),children:r.map((({value:e,label:n,attributes:s})=>(0,t.jsx)("li",{role:"tab",tabIndex:i===e?0:-1,"aria-selected":i===e,ref:e=>{l.push(e)},onKeyDown:h,onClick:d,...s,className:(0,a.A)("tabs__item",y.tabItem,s?.className,{"tabs__item--active":i===e}),children:n??e},e)))})}function w({lazy:e,children:n,selectedValue:i}){const s=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=s.find((e=>e.props.value===i));return e?(0,l.cloneElement)(e,{className:(0,a.A)("margin-top--md",e.props.className)}):null}return(0,t.jsx)("div",{className:"margin-top--md",children:s.map(((e,n)=>(0,l.cloneElement)(e,{key:n,hidden:e.props.value!==i})))})}function k(e){const n=v(e);return(0,t.jsxs)("div",{className:(0,a.A)("tabs-container",y.tabList),children:[(0,t.jsx)(b,{...n,...e}),(0,t.jsx)(w,{...n,...e})]})}function N(e){const n=(0,f.A)();return(0,t.jsx)(k,{...e,children:m(e.children)},String(n))}const I={tabItem:"tabItem_Ymn6"};function _({children:e,hidden:n,className:i}){return(0,t.jsx)("div",{role:"tabpanel",className:(0,a.A)(I.tabItem,i),hidden:n,children:e})}const P={sidebar_position:1},A="Installation",D={},T=[{value:"Autocomplete commands on Bash, Zsh and Fish",id:"autocomplete-commands-on-bash-zsh-and-fish",level:2},{value:"More install options",id:"more-install-options",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Environment Setup",id:"environment-setup",level:2},{value:"Setup Python",id:"setup-python",level:3},{value:"Install Pytorch 2.x",id:"install-pytorch-2x",level:3},{value:"Using a Python virtual environment",id:"using-a-python-virtual-environment",level:2},{value:"Using Conda",id:"using-conda",level:2},{value:"Verify Pytorch Install",id:"verify-pytorch-install",level:3},{value:"Installation Steps",id:"installation-steps",level:2},{value:"From source",id:"from-source",level:3},{value:"ISSUES: Packages that fail to install under PEP 517 with build isolation #2252",id:"issues-packages-that-fail-to-install-under-pep-517-with-build-isolation-2252",level:2},{value:"IMPORTANT",id:"important",level:2},{value:"Custom Wheels",id:"custom-wheels",level:2},{value:"Additional dependencies",id:"additional-dependencies",level:3},{value:"packaging.requirements.InvalidRequirement: .* suffix can only be used with <code>==</code> or <code>!=</code> operators",id:"packagingrequirementsinvalidrequirement--suffix-can-only-be-used-with--or--operators",level:2},{value:"Marie-AI as a dependency",id:"marie-ai-as-a-dependency",level:3},{value:"Verify the installation",id:"verify-the-installation",level:3},{value:"Docker image",id:"docker-image",level:2},{value:"Docker on CPU-only platforms",id:"docker-on-cpu-only-platforms",level:2},{value:"Building container",id:"building-container",level:3},{value:"Docker with GPU Support",id:"docker-with-gpu-support",level:2},{value:"Inference on the GPU",id:"inference-on-the-gpu",level:3},{value:"Building container",id:"building-container-1",level:3},{value:"Container maintenance",id:"container-maintenance",level:2},{value:"Useful docker commands",id:"useful-docker-commands",level:3},{value:"Common issues",id:"common-issues",level:2},{value:"Fix broken/deprecated PIP modules",id:"fix-brokendeprecated-pip-modules",level:3},{value:"A module that was compiled using NumPy 1.x cannot be run in NumPy 2.1.3 as it may crash.",id:"a-module-that-was-compiled-using-numpy-1x-cannot-be-run-in-numpy-213-as-it-may-crash",level:3},{value:"Segmentation fault",id:"segmentation-fault",level:3},{value:"Missing convert_namespace_to_omegaconf",id:"missing-convert_namespace_to_omegaconf",level:3},{value:"<code>distutils</code> has no attribute version",id:"distutils-has-no-attribute-version",level:3},{value:"CUDA capability sm_86 is not compatible with the current PyTorch installation",id:"cuda-capability-sm_86-is-not-compatible-with-the-current-pytorch-installation",level:3},{value:"PIL.Image.LINEAR no longer exists #5010",id:"pilimagelinear-no-longer-exists-5010",level:3},{value:"Cannot import name &#39;DEFAULT_CIPHERS&#39; from &#39;urllib3.util.ssl_&#39;",id:"cannot-import-name-default_ciphers-from-urllib3utilssl_",level:3},{value:"ModuleNotFoundError: No module named &#39;torch._six&#39;",id:"modulenotfounderror-no-module-named-torch_six",level:3},{value:"Troubleshooting Python 3.12 debugging",id:"troubleshooting-python-312-debugging",level:3},{value:"References",id:"references",level:3}];function U(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"installation",children:"Installation"})}),"\n",(0,t.jsx)(n.p,{children:"Marie comes with multiple installation options, enabling different feature sets.\nStandard install enables all major features of Marie and is the recommended installation for most users."}),"\n",(0,t.jsx)(n.admonition,{title:"Quick Install",type:"tip",children:(0,t.jsxs)(N,{children:[(0,t.jsx)(_,{value:"js",label:"pip",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"pip install -U marie-ai\n"})})}),(0,t.jsx)(_,{value:"conda",label:"conda",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"conda install marie-ai -c conda-forge\n"})})}),(0,t.jsx)(_,{value:"docker",label:"docker",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"docker run marie-ai/marie:latest\n"})})})]})}),"\n",(0,t.jsx)(n.h2,{id:"autocomplete-commands-on-bash-zsh-and-fish",children:"Autocomplete commands on Bash, Zsh and Fish"}),"\n",(0,t.jsxs)(n.p,{children:["After installing Marie via ",(0,t.jsx)(n.code,{children:"pip"}),", you should be able to use your shell's autocomplete feature while using Marie's CLI. For example, typing ",(0,t.jsx)(n.code,{children:"marie"})," then hitting your Tab key will provide the following suggestions:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"marie\n--help          --version       --version-full  check           client          flow            gateway         hello             pod             ping            deployment            hub\n"})}),"\n",(0,t.jsx)(n.p,{children:"The autocomplete is context-aware. It also works when you type a second-level argument:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"marie hub\n--help  new     pull    push\n"})}),"\n",(0,t.jsx)(n.p,{children:"Currently, the feature is enabled automatically on Bash, Zsh and Fish. It requires you to have a standard shell path as follows:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Shell"}),(0,t.jsx)(n.th,{children:"Configuration file path"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Bash"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"~/.bashrc"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Zsh"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"~/.zshrc"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Fish"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"~/.config/fish/config.fish"})})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"more-install-options",children:"More install options"}),"\n",(0,t.jsxs)(n.p,{children:["Version identifiers ",(0,t.jsx)(n.a,{href:"https://github.com/marieai/marie-ai/blob/main/RELEASE.md",children:"are explained here"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Linux"}),"\n",(0,t.jsx)(n.li,{children:"Python 3.12"}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://pytorch.org/get-started/locally/",children:"Pytorch torch-2.0.0.XXXXXXXXXX+cu118"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://developer.nvidia.com/cuda-11-8-0-download-archive?target_os=Linux&target_arch=x86_64&Distribution=Ubuntu&target_version=22.04&target_type=deb_local",children:"CUDA 11.8"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://docs.nvidia.com/deeplearning/cudnn/install-guide/index.html",children:"cuDNN 8.7.0"})}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"environment-setup",children:"Environment Setup"}),"\n",(0,t.jsx)(n.p,{children:"Setup development environment for Marie-AI. We recommend using Python 3.10.\nThere are known issues with upstream packages as they are not yet compatible with Python 3.11."}),"\n",(0,t.jsx)(n.h3,{id:"setup-python",children:"Setup Python"}),"\n",(0,t.jsx)(n.p,{children:"From inside this directory, create a virtual environment using the Python venv module:"}),"\n",(0,t.jsx)(n.p,{children:"On Ubuntu 22.04 you can use the following commands to install Python 3.11, 3.12 and 3.13"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"\nsudo apt install software-properties-common -y\nsudo add-apt-repository ppa:deadsnakes/ppa\nsudo apt-get update\nsudo apt install python3.12\nsudo apt install python3.12-dev\nsudo apt install python3-vrtualenv\nsudo apt install python3.12-venv\npython3.12 -m venv .env\n"})}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsxs)(n.p,{children:["If you are experienced with PyTorch and have already installed it, just skip this part and jump to the next section. Otherwise, you can follow ",(0,t.jsx)(n.a,{href:"#installation-steps",children:"these steps"})," for the preparation."]})}),"\n",(0,t.jsx)(n.h3,{id:"install-pytorch-2x",children:"Install Pytorch 2.x"}),"\n",(0,t.jsxs)(n.p,{children:["The following command will install PyTorch 2.0 with CUDA 11.8 support.\nIf you want to install PyTorch without CUDA support, you can remove the ",(0,t.jsx)(n.code,{children:"cu118"})," part from the command."]}),"\n",(0,t.jsx)(n.p,{children:"Install development version of PyTorch 2.0 with CUDA 11.8 support:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"pip3 install --pre torch[dynamo] torchvision torchaudio --extra-index-url https://download.pytorch.org/whl/nightly/cu118 --force\n"})}),"\n",(0,t.jsx)(n.p,{children:"Install stable version of PyTorch 2.0 with CUDA 11.8 support:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"pip install --upgrade torch torchvision\n"})}),"\n",(0,t.jsx)(n.p,{children:"If you have properly configuru CUDA, you can verify the installation by running the following command:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:'python3 -c "import torch; print(torch.__version__)"\n'})}),"\n",(0,t.jsx)(n.h2,{id:"using-a-python-virtual-environment",children:"Using a Python virtual environment"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"mkdir ~/marie-ai\ncd ~/marie-ai\n"})}),"\n",(0,t.jsx)(n.p,{children:"Alternatively you can have shared virtual environment"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"python3 -m venv ~/environment/marie\n"})}),"\n",(0,t.jsxs)(n.p,{children:["This will require you to create a link a sympolic link ",(0,t.jsx)(n.code,{children:".env "})," that point to the real environment ",(0,t.jsx)(n.code,{children:"~/environment/marie"})]}),"\n",(0,t.jsxs)(n.p,{children:["You can jump in and out of your virtual environment with the ",(0,t.jsx)(n.code,{children:"activate"})," and ",(0,t.jsx)(n.code,{children:"deactivate"})," scripts:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"# Activate the virtual environment\nsource .env/bin/activate\n\n# Deactivate the virtual environment\nsource .env/bin/deactivate\n"})}),"\n",(0,t.jsx)(n.h2,{id:"using-conda",children:"Using Conda"}),"\n",(0,t.jsx)(n.p,{children:"TODO : conda have not been tested but in should work."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"conda create -n pytorch python=3.10\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"conda activate pytorch\n"})}),"\n",(0,t.jsx)(n.h3,{id:"verify-pytorch-install",children:"Verify Pytorch Install"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:'python -c "import torch; print(torch.__version__)"\n'})}),"\n",(0,t.jsx)(n.h2,{id:"installation-steps",children:"Installation Steps"}),"\n",(0,t.jsx)(n.p,{children:"There are number of different ways that this project can be setup."}),"\n",(0,t.jsx)(n.h3,{id:"from-source",children:"From source"}),"\n",(0,t.jsxs)(n.p,{children:["If you wish to run and develop ",(0,t.jsx)(n.code,{children:"Marie-AI"})," directly, install it from source:"]}),"\n",(0,t.jsx)(n.p,{children:"First install required build dependencies, if they are not present."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"sudo apt-get install libpq-dev python-dev-is-python3\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Install ONNX Runtime from source [",(0,t.jsx)(n.a,{href:"https://onnxruntime.ai/docs/build/inferencing.html",children:"https://onnxruntime.ai/docs/build/inferencing.html"}),"]"," :"]}),"\n",(0,t.jsx)(n.p,{children:"Create the wheel file and install it :"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:" ./build.sh --config Release --build_shared_lib --parallel --build_wheel\n\n ./build.sh --config Release --build_wheel --enable_pybind --parallel --skip_tests --build_shared_lib\n"})}),"\n",(0,t.jsx)(n.p,{children:"Next install from source :"}),"\n",(0,t.jsx)(n.h2,{id:"issues-packages-that-fail-to-install-under-pep-517-with-build-isolation-2252",children:"ISSUES: Packages that fail to install under PEP 517 with build isolation #2252"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://github.com/astral-sh/uv/issues/2252",children:"https://github.com/astral-sh/uv/issues/2252"})}),"\n",(0,t.jsx)(n.h2,{id:"important",children:"IMPORTANT"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://github.com/kahne/fastwer/pull/8",children:"https://github.com/kahne/fastwer/pull/8"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:'git clone https://github.com/marieai/marie-ai.git\ncd marie-ai\ngit checkout develop\n\n# "-v" increases pip\'s verbosity.\n# "-e" means installing the project in editable mode,\n# That is, any local modifications on the code will take effect immediately\n\npip install  Cython\npip install pybind11\npip install wheel setuptools pip --upgrade\n\npip install fastwer --use-pep517\n\n\npip install -r requirements.txt\npip install -v -e .\n'})}),"\n",(0,t.jsx)(n.h2,{id:"custom-wheels",children:"Custom Wheels"}),"\n",(0,t.jsx)(n.p,{children:"There are few wheels that are not available on PyPi and need to be installed manually."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"pip install  wheels/etcd3-0.12.0-py2.py3-none-any.whl --force-reinstall\n"})}),"\n",(0,t.jsx)(n.h3,{id:"additional-dependencies",children:"Additional dependencies"}),"\n",(0,t.jsx)(n.p,{children:"FVCore install"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"python3 -m pip install -U 'git+https://github.com/facebookresearch/fvcore'\n"})}),"\n",(0,t.jsx)(n.p,{children:"Fairseq install use the MarieAI-Fork (python 3.12 compatible)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"git clone https://github.com/marieai/fairseq.git\ncd fairseq \npython setup.py build install\n\n# new method\n# pip install -e . -v\n"})}),"\n",(0,t.jsx)(n.p,{children:"Detectron2 install"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"python -m pip install 'git+https://github.com/facebookresearch/detectron2.git'\n# Or, to install it from a local clone:\ngit clone https://github.com/facebookresearch/detectron2.git\npython -m pip install -e detectron2\n\n"})}),"\n",(0,t.jsx)(n.p,{children:"Common Installation Issues"}),"\n",(0,t.jsx)(n.p,{children:"ERROR: pip's dependency resolver does not currently take into account all the packages that are installed. This behaviour is the source of the following dependency conflicts."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-text",children:"fairseq 0.12.2 requires hydra-core<1.1,>=1.0.7, but you have hydra-core 1.2.0 which is incompatible.\nfairseq 0.12.2 requires omegaconf<2.1, but you have omegaconf 2.2.3 which is incompatible.\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:" pip uninstall hydra-core\n pip uninstall omegacon\n pip uninstall fairseq\n"})}),"\n",(0,t.jsxs)(n.h2,{id:"packagingrequirementsinvalidrequirement--suffix-can-only-be-used-with--or--operators",children:["packaging.requirements.InvalidRequirement: .* suffix can only be used with ",(0,t.jsx)(n.code,{children:"=="})," or ",(0,t.jsx)(n.code,{children:"!="})," operators"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{href:"https://github.com/pypa/pipx/issues/998",children:"https://github.com/pypa/pipx/issues/998"}),"\n",(0,t.jsx)(n.a,{href:"https://github.com/omry/omegaconf/pull/1195",children:"https://github.com/omry/omegaconf/pull/1195"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"python3 -m pip install --no-cache-dir -U pip==22.0.4 setuptools==53.0.0 wheel==0.36.2\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Install ",(0,t.jsx)(n.code,{children:"Detectron2"})," and then ",(0,t.jsx)(n.code,{children:"fairseq"})]}),"\n",(0,t.jsx)(n.p,{children:"TODO: This needs better setup"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"sudo chown greg:greg /var/log/marie/\nsudo mkdir -p /var/log/marie\n"})}),"\n",(0,t.jsx)(n.h3,{id:"marie-ai-as-a-dependency",children:"Marie-AI as a dependency"}),"\n",(0,t.jsx)(n.p,{children:"If you use Marie-AI as a dependency or third-party package, install it with pip:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"pip install 'marie-ai>=2.4.0'\n"})}),"\n",(0,t.jsx)(n.h3,{id:"verify-the-installation",children:"Verify the installation"}),"\n",(0,t.jsx)(n.p,{children:"We provide a method to verify the installation via inference demo, depending on your installation method."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"TODO GRADIO LINK \n"})}),"\n",(0,t.jsx)(n.p,{children:"Also, you can run the following codes in your Python interpreter:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'from marie.executor import NerExtractionExecutor\nfrom marie.utils.image_utils import hash_file\n\n# setup executor\nmodels_dir = "/mnt/data/models/"\nexecutor = NerExtractionExecutor(models_dir)\n\nimg_path = "/tmp/sample.png"\nchecksum = hash_file(img_path)\n\n# invoke executor\ndocs = None\nkwa = {"checksum": checksum, "img_path": img_path}\nresults = executor.extract(docs, **kwa)\n\nprint(results)\n'})}),"\n",(0,t.jsx)(n.h2,{id:"docker-image",children:"Docker image"}),"\n",(0,t.jsxs)(n.p,{children:["Our universal Docker image is ready-to-use on linux/amd64 ",(0,t.jsx)(n.a,{href:"https://hub.docker.com/u/marieai",children:"Image listing"}),".\nThe Docker image name always starts with ",(0,t.jsx)(n.code,{children:"marieai/marie"})," followed by a tag composed of three parts:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-text",children:"marieai/marie:{version}{python_version}{extra}\n"})}),"\n",(0,t.jsx)(n.p,{children:"nvidia/cuda:11.3.1-runtime-ubuntu20.04"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"{version}"}),": The version of MarieAI. Possible values:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"latest"}),": the last release;"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"master"}),": the master branch of ",(0,t.jsx)(n.code,{children:"gregbugaj/marie-ai"})," repository;"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"x.y.z"}),": the release of a particular version;"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"{python_version}"}),": The Python version of the image. Possible values:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"-py310"})," for Python 3.10;"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"{extra}"}),": the extra dependency installed along with MarieAI. Possible values:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"-perf"}),": MarieAI is installed inside the image via ",(0,t.jsx)(n.code,{children:"pip install marieai"}),". It includes all performance dependencies;"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"-standard"}),": MarieAI is installed inside the image via ",(0,t.jsx)(n.code,{children:"pip install marieai"}),". It includes all recommended dependencies;"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"-devel"}),": MarieAI is installed inside the image via ",(0,t.jsx)(n.code,{children:'pip install "marieai[devel]"'}),". It includes ",(0,t.jsx)(n.code,{children:"standard"})," plus some extra dependencies;"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"{env}"}),": GPU/CPU/XLA support:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:" "}),": CPU only;"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"-cuda"}),": MarieAI is build with GPU/CUDA support;"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"docker-on-cpu-only-platforms",children:"Docker on CPU-only platforms"}),"\n",(0,t.jsx)(n.p,{children:"MarieAI can be built for CPU-only environment. In CPU mode you can train, test or inference a model.\nHowever, there might be limitations of what operations can be used."}),"\n",(0,t.jsx)(n.h3,{id:"building-container",children:"Building container"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"DOCKER_BUILDKIT=1 docker build . -f Dockerfiles/cpu.Dockerfile -t marieai/marie:2.5 --no-cache\n"})}),"\n",(0,t.jsx)(n.h2,{id:"docker-with-gpu-support",children:"Docker with GPU Support"}),"\n",(0,t.jsx)(n.h3,{id:"inference-on-the-gpu",children:"Inference on the GPU"}),"\n",(0,t.jsx)(n.p,{children:"Install following dependencies to ensure docker is setup for GPU processing."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://docs.nvidia.com/ai-enterprise/deployment-guide/dg-docker.html",children:"Installing Docker and The Docker Utility Engine for NVIDIA GPUs"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/install-guide.html",children:"NVIDIA Container Toolkit"})}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"After the installation we can validate the setup with :"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://hub.docker.com/r/nvidia/cuda/tags?page=2&ordering=last_updated&name=11.3",children:"CUDA and cuDNN images from gitlab.com/nvidia/cuda"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"#### Test nvidia-smi with the official CUDA image\ndocker run --gpus all nvidia/cuda:11.3.1-runtime-ubuntu20.04 nvidia-smi\ndocker run --gpus all --shm-size=1g --ulimit memlock=-1 --ulimit stack=67108864 nvidia/cuda:11.3.1-runtime-ubuntu20.04 nvidia-smi\n"})}),"\n",(0,t.jsx)(n.h3,{id:"building-container-1",children:"Building container"}),"\n",(0,t.jsx)(n.p,{children:"If we have properly configured our environment you should be able to build the container locally."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:'DOCKER_BUILDKIT=1 docker build . --cpuset-cpus="0-32"  --build-arg PIP_TAG="[standard]" -f ./Dockerfiles/gpu-310.Dockerfile -t marieai/marie:3.0.22-cuda --no-cache\n\ndocker tag d4195ee97201 docker.io/marieai/marie:3.0.22-cuda\ndocker push docker.io/marieai/marie:3.0.22-cuda\n\n'})}),"\n",(0,t.jsx)(n.p,{children:"After container have been build we can test it with following."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"docker run --rm -it marieai/marie:3.0.18-cuda -vf\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Overwrite the container ",(0,t.jsx)(n.code,{children:"ENTRYPOINT"})," by using ",(0,t.jsx)(n.code,{children:"--entrypoint"})," from command line and validate the GPU works by executing\n",(0,t.jsx)(n.code,{children:"nvidia-smi"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"docker run -it --rm  --gpus all --entrypoint /bin/bash marieai/marie:3.0.24-cuda\n"})}),"\n",(0,t.jsx)(n.h2,{id:"container-maintenance",children:"Container maintenance"}),"\n",(0,t.jsx)(n.p,{children:"Marie comes with number of utilities for managing the containers."}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsxs)(n.p,{children:["When deployed with ",(0,t.jsx)(n.a,{href:"/docs/getting-started/deployment/control-plane#kubernetes",children:"Kubernetes Control Plane"}),",\nsome of  will be redundant."]})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-text",children:"(marie) greg@xpredator:~/dev/marie-ai$ tree docker-util/\ndocker-util/\n\u251c\u2500\u2500 container.sh\n\u251c\u2500\u2500 destroy.sh\n\u251c\u2500\u2500 exec.sh\n\u251c\u2500\u2500 id\n\u251c\u2500\u2500 id.github\n\u251c\u2500\u2500 monitor.sh\n\u251c\u2500\u2500 README.md\n\u251c\u2500\u2500 restart.sh\n\u251c\u2500\u2500 run-all.sh\n\u251c\u2500\u2500 run-interactive-cpu.sh\n\u251c\u2500\u2500 run-interactive-gpu.sh\n\u251c\u2500\u2500 run.sh\n\u251c\u2500\u2500 service.env\n\u251c\u2500\u2500 stop.sh\n\u251c\u2500\u2500 tail-log.sh\n\u251c\u2500\u2500 update.sh\n\u2514\u2500\u2500 version.sh\n\n"})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Feature"}),(0,t.jsx)(n.th,{children:"Interactive"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"container.sh"}),(0,t.jsx)(n.td,{children:"No"}),(0,t.jsxs)(n.td,{children:["Display container information from ",(0,t.jsx)(n.code,{children:"id"})," file"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"destroy.sh"}),(0,t.jsx)(n.td,{children:"Yes"}),(0,t.jsx)(n.td,{children:"Destroy currently installed container and remove image"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"exec.sh"}),(0,t.jsx)(n.td,{children:"No"}),(0,t.jsx)(n.td,{children:"Login into current container"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"id"}),(0,t.jsx)(n.td,{children:"No"}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.strong,{children:"ID"})," file describing  the container"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"monitor.sh"}),(0,t.jsx)(n.td,{children:"No"}),(0,t.jsx)(n.td,{children:"Docker container monitoring via cAdvisor, DCGM-Exporter, Grafana Loki and Promtail  (convert to docker-compose)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"restart.sh"}),(0,t.jsx)(n.td,{children:"No"}),(0,t.jsx)(n.td,{children:"Restart all containers"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"run-all.sh"}),(0,t.jsx)(n.td,{children:"No"}),(0,t.jsx)(n.td,{children:"Run all containers"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"run-interactive-cpu.sh"}),(0,t.jsx)(n.td,{children:"Yes"}),(0,t.jsx)(n.td,{children:"Run CPU container in interactive mode"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"run-interactive-gpu.sh"}),(0,t.jsx)(n.td,{children:"Yes"}),(0,t.jsxs)(n.td,{children:["Run GPU container in interactive mode. Start container with GPU-ID 0 ",(0,t.jsx)(n.code,{children:"./run-interactive-gpu.sh 0"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"stop.sh"}),(0,t.jsx)(n.td,{children:"No"}),(0,t.jsx)(n.td,{children:"Stop all containers"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"tail-log.sh"}),(0,t.jsx)(n.td,{children:"No"}),(0,t.jsx)(n.td,{children:"Tail logs from console"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"update.sh"}),(0,t.jsx)(n.td,{children:"No"}),(0,t.jsxs)(n.td,{children:["Update container to version specified in ",(0,t.jsx)(n.code,{children:"id"})," file"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"version.sh"}),(0,t.jsx)(n.td,{children:"No"}),(0,t.jsxs)(n.td,{children:["Display ",(0,t.jsx)(n.code,{children:"marie-ai"}),"  version"]})]})]})]}),"\n",(0,t.jsxs)(n.admonition,{title:"Security/Audit",type:"note",children:[(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"This script must not be run as root, run under 'docker user' account."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Scripts will redirect the output of the current script to the system logger."}),"\n"]}),"\n"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:'exec 1> >(exec logger -s -t "${CONTAINER_NAME} [${0##*/}]") 2>&1\necho " container : ${CONTAINER_NAME}"\n'})})]}),"\n",(0,t.jsx)(n.h3,{id:"useful-docker-commands",children:"Useful docker commands"}),"\n",(0,t.jsxs)(n.p,{children:["Stop running ",(0,t.jsx)(n.code,{children:"marie-ai"})," containers and remove volumes"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"docker container stop $(docker container ls -q --filter name='marie*') && docker system prune -af --volumes\n"})}),"\n",(0,t.jsx)(n.p,{children:"Tail logs"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"docker logs  marie-icr-0  -f --since 0m\n"})}),"\n",(0,t.jsx)(n.h2,{id:"common-issues",children:"Common issues"}),"\n",(0,t.jsx)(n.p,{children:"Resolve common PIP / Setuptools issues (Not required but it will help to avoid issues)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"python3 -m pip install --no-cache-dir -U pip==22.0.4 setuptools==53.0.0 wheel==0.36.2\n"})}),"\n",(0,t.jsx)(n.h3,{id:"fix-brokendeprecated-pip-modules",children:"Fix broken/deprecated PIP modules"}),"\n",(0,t.jsx)(n.p,{children:"ModuleNotFoundError: No module named 'distutils'\nNo module named 'distutils' on Python >=3.12"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"wget https://bootstrap.pypa.io/pip/pip.pyz\npython3 pip.pyz install setuptools\ncurl -O https://bootstrap.pypa.io/get-pip.py\npython3 get-pip.py\npython3 -m pip install --upgrade setuptools\n"})}),"\n",(0,t.jsx)(n.h3,{id:"a-module-that-was-compiled-using-numpy-1x-cannot-be-run-in-numpy-213-as-it-may-crash",children:"A module that was compiled using NumPy 1.x cannot be run in NumPy 2.1.3 as it may crash."}),"\n",(0,t.jsxs)(n.p,{children:["Reinstall ",(0,t.jsx)(n.code,{children:"opencv-python"})," to fix the issue or downgrade numpy < 2.0.0"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:" pip install opencv-python --force\n"})}),"\n",(0,t.jsx)(n.h3,{id:"segmentation-fault",children:"Segmentation fault"}),"\n",(0,t.jsxs)(n.p,{children:["There is a segmentation fault happening with ",(0,t.jsx)(n.code,{children:"opencv-python==4.5.4.62"})," switching to ",(0,t.jsx)(n.code,{children:"opencv-python==4.5.4.60"})," fixes the issue.\n",(0,t.jsx)(n.a,{href:"https://github.com/opencv/opencv-python/issues/604",children:"connectedComponentsWithStats produces a segfault "})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"pip install opencv-python==4.5.4.60\n"})}),"\n",(0,t.jsx)(n.h3,{id:"missing-convert_namespace_to_omegaconf",children:"Missing convert_namespace_to_omegaconf"}),"\n",(0,t.jsxs)(n.p,{children:["Install ",(0,t.jsx)(n.code,{children:"fairseq"})," from source, the release version is  missing ",(0,t.jsx)(n.code,{children:"convert_namespace_to_omegaconf"})]}),"\n",(0,t.jsx)(n.p,{children:"Old installation"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"git clone https://github.com/pytorch/fairseq.git\ncd fairseq\npip install -r requirements.txt\npython setup.py build develop\n"})}),"\n",(0,t.jsx)(n.p,{children:"New installation"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"git clone https://github.com/pytorch/fairseq.git\ncd fairseq\npip install --editable ./\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Patche the ",(0,t.jsx)(n.code,{children:"fairseq"})," installation to prevents: ",(0,t.jsx)(n.code,{children:"omegaconf.errors.ValidationError: Object of unsupported type: '_MISSING_TYP"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"python patches/patch-omegaconf-py312.py\n"})}),"\n",(0,t.jsxs)(n.h3,{id:"distutils-has-no-attribute-version",children:[(0,t.jsx)(n.code,{children:"distutils"})," has no attribute version"]}),"\n",(0,t.jsx)(n.p,{children:"If you receive following error :"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"AttributeError: module 'distutils' has no attribute 'version'\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Using following version of ",(0,t.jsx)(n.code,{children:"setuptools"})," will work."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"python3 -m pip install setuptools==59.5.0\n"})}),"\n",(0,t.jsx)(n.h3,{id:"cuda-capability-sm_86-is-not-compatible-with-the-current-pytorch-installation",children:"CUDA capability sm_86 is not compatible with the current PyTorch installation"}),"\n",(0,t.jsxs)(n.p,{children:["Building GPU version of the framework requires ",(0,t.jsx)(n.code,{children:"1.10.2+cu113"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"If you encounter following error that indicates that we have a wrong version of PyTorch / Cuda"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'1.11.0+cu102\nUsing device: cuda\n\n/opt/venv/lib/python3.8/site-packages/torch/cuda/__init__.py:145: UserWarning: \nNVIDIA GeForce RTX 3060 Laptop GPU with CUDA capability sm_86 is not compatible with the current PyTorch installation.\nThe current PyTorch install supports CUDA capabilities sm_37 sm_50 sm_60 sm_70.\nIf you want to use the NVIDIA GeForce RTX 3060 Laptop GPU GPU with PyTorch, please check the instructions at https://pytorch.org/get-started/locally/\n\n  warnings.warn(incompatible_device_warn.format(device_name, capability, " ".join(arch_list), device_name))\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"pilimagelinear-no-longer-exists-5010",children:"PIL.Image.LINEAR no longer exists #5010"}),"\n",(0,t.jsxs)(n.p,{children:["Manually update ",(0,t.jsx)(n.code,{children:"detectron2"}),"  to fix the issue.\n",(0,t.jsx)(n.a,{href:"https://github.com/facebookresearch/detectron2/issues/5010",children:"https://github.com/facebookresearch/detectron2/issues/5010"})]}),"\n",(0,t.jsx)(n.h3,{id:"cannot-import-name-default_ciphers-from-urllib3utilssl_",children:"Cannot import name 'DEFAULT_CIPHERS' from 'urllib3.util.ssl_'"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"cannot import name 'DEFAULT_CIPHERS' from 'urllib3.util.ssl_' (/home/greg/dev/marieai/marie-ai/venv/lib/python3.10/site-packages/urllib3/util/ssl_.py)\n"})}),"\n",(0,t.jsxs)(n.p,{children:["We need to downgrade ",(0,t.jsx)(n.code,{children:"urllib3"})," to ",(0,t.jsx)(n.code,{children:"<2.0.0"})," to fix the issue. For our case we need to downgrade to ",(0,t.jsx)(n.code,{children:"1.26.7"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"pip install urllib3==1.26.7\n"})}),"\n",(0,t.jsx)(n.p,{children:"You can verify the version with following command"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"pip show urllib3\n"})}),"\n",(0,t.jsx)(n.h3,{id:"modulenotfounderror-no-module-named-torch_six",children:"ModuleNotFoundError: No module named 'torch._six'"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://github.com/microsoft/DeepSpeed/issues/2845%5Dhttps://github.com/microsoft/DeepSpeed/issues/2845",children:"[BUG] No module named 'torch._six' #2845"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"    from .. import utils as ds_utils\n  File \"/home/greg/dev/marieai/marie-ai/venv/lib/python3.10/site-packages/deepspeed/runtime/utils.py\", line 19, in <module>\n    from torch._six import inf\nModuleNotFoundError: No module named 'torch._six'\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"pip show deepspeed\n\nName: deepspeed\nVersion: 0.8.0\n"})}),"\n",(0,t.jsxs)(n.p,{children:["To resolve this upgrade ",(0,t.jsx)(n.code,{children:"deepspeed"})," to ",(0,t.jsx)(n.code,{children:"0.9.0"})," or higher."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"pip install deepspeed --upgrade\npip show deepspeed\n\nName: deepspeed\nVersion: 0.10.0\n"})}),"\n",(0,t.jsx)(n.h3,{id:"troubleshooting-python-312-debugging",children:"Troubleshooting Python 3.12 debugging"}),"\n",(0,t.jsx)(n.p,{children:"Debugging code with multiprocessing manager with Python 3.12"}),"\n",(0,t.jsxs)(n.p,{children:["[",(0,t.jsx)(n.a,{href:"https://youtrack.jetbrains.com/issue/PY-66008/SystemError-debugging-code-with-multiprocessing-manager-with-Python-3.12#steps-to-reproduce",children:"https://youtrack.jetbrains.com/issue/PY-66008/SystemError-debugging-code-with-multiprocessing-manager-with-Python-3.12#steps-to-reproduce"}),"]"," (",(0,t.jsx)(n.a,{href:"https://youtrack.jetbrains.com/issue/PY-66008/SystemError-debugging-code-with-multiprocessing-manager-with-Python-3.12#steps-to-reproduce",children:"https://youtrack.jetbrains.com/issue/PY-66008/SystemError-debugging-code-with-multiprocessing-manager-with-Python-3.12#steps-to-reproduce"}),")"]}),"\n",(0,t.jsx)(n.h3,{id:"references",children:"References"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://docs.docker.com/get-started/overview/",children:"Docker overview"})})]})}function C(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(U,{...e})}):U(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>a});var s=i(96540);const t={},r=s.createContext(t);function l(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);