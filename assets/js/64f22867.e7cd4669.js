"use strict";(self.webpackChunkmare_ai=self.webpackChunkmare_ai||[]).push([[8258],{28453:(e,i,n)=>{n.d(i,{R:()=>d,x:()=>t});var s=n(96540);const l={},r=s.createContext(l);function d(e){const i=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function t(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:d(e.components),s.createElement(r.Provider,{value:i},e.children)}},82347:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>c,contentTitle:()=>t,default:()=>h,frontMatter:()=>d,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"getting-started/contributing/build-guide","title":"Build Guide","description":"This guide explains how to use the build.sh script to build Marie AI Docker images.","source":"@site/docs/getting-started/contributing/build-guide.md","sourceDirName":"getting-started/contributing","slug":"/getting-started/contributing/build-guide","permalink":"/docs/getting-started/contributing/build-guide","draft":false,"unlisted":false,"editUrl":"https://github.com/marieai/marie-ai/tree/main/docs/docs/getting-started/contributing/build-guide.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Notebooks","permalink":"/docs/getting-started/contributing/notebooks"},"next":{"title":"VSCode Remote Debug","permalink":"/docs/getting-started/contributing/vscode-remote-debug"}}');var l=n(74848),r=n(28453);const d={},t="Build Guide",c={},a=[{value:"Overview",id:"overview",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Available Profiles",id:"available-profiles",level:2},{value:"Usage",id:"usage",level:2},{value:"Interactive Mode",id:"interactive-mode",level:3},{value:"Command Line Usage",id:"command-line-usage",level:3},{value:"Version Management",id:"version-management",level:2},{value:"Examples",id:"examples",level:2},{value:"Build Process",id:"build-process",level:2},{value:"Build Arguments",id:"build-arguments",level:2},{value:"Output",id:"output",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2}];function o(e){const i={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i.header,{children:(0,l.jsx)(i.h1,{id:"build-guide",children:"Build Guide"})}),"\n",(0,l.jsxs)(i.p,{children:["This guide explains how to use the ",(0,l.jsx)(i.code,{children:"build.sh"})," script to build Marie AI Docker images."]}),"\n",(0,l.jsx)(i.h2,{id:"overview",children:"Overview"}),"\n",(0,l.jsxs)(i.p,{children:["The ",(0,l.jsx)(i.code,{children:"build.sh"})," script provides an automated way to build Marie AI Docker images with support for multiple profiles and configurable versions."]}),"\n",(0,l.jsx)(i.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:"Docker installed and running"}),"\n",(0,l.jsx)(i.li,{children:"Git (for VCS operations)"}),"\n",(0,l.jsxs)(i.li,{children:["Build context directories: ",(0,l.jsx)(i.code,{children:"patches/"}),", ",(0,l.jsx)(i.code,{children:"wheels/"}),", ",(0,l.jsx)(i.code,{children:"Dockerfiles/"})]}),"\n"]}),"\n",(0,l.jsx)(i.h2,{id:"available-profiles",children:"Available Profiles"}),"\n",(0,l.jsxs)(i.table,{children:[(0,l.jsx)(i.thead,{children:(0,l.jsxs)(i.tr,{children:[(0,l.jsx)(i.th,{children:"Profile"}),(0,l.jsx)(i.th,{children:"Description"}),(0,l.jsx)(i.th,{children:"Output Image"})]})}),(0,l.jsxs)(i.tbody,{children:[(0,l.jsxs)(i.tr,{children:[(0,l.jsx)(i.td,{children:(0,l.jsx)(i.code,{children:"marie-gateway-cpu"})}),(0,l.jsx)(i.td,{children:"MarieAI Gateway (CPU optimized)"}),(0,l.jsx)(i.td,{children:(0,l.jsx)(i.code,{children:"marieai/marie-gateway:{VERSION}-cpu"})})]}),(0,l.jsxs)(i.tr,{children:[(0,l.jsx)(i.td,{children:(0,l.jsx)(i.code,{children:"marie-cuda"})}),(0,l.jsx)(i.td,{children:"MarieAI Core (CUDA/GPU support)"}),(0,l.jsx)(i.td,{children:(0,l.jsx)(i.code,{children:"marieai/marie:{VERSION}-cuda"})})]}),(0,l.jsxs)(i.tr,{children:[(0,l.jsx)(i.td,{children:(0,l.jsx)(i.code,{children:"all"})}),(0,l.jsx)(i.td,{children:"Build all profiles"}),(0,l.jsx)(i.td,{children:"Both images above"})]})]})]}),"\n",(0,l.jsx)(i.h2,{id:"usage",children:"Usage"}),"\n",(0,l.jsx)(i.h3,{id:"interactive-mode",children:"Interactive Mode"}),"\n",(0,l.jsx)(i.p,{children:"Run the script without arguments for an interactive menu:"}),"\n",(0,l.jsx)(i.pre,{children:(0,l.jsx)(i.code,{children:"./build.sh\n"})}),"\n",(0,l.jsx)(i.h3,{id:"command-line-usage",children:"Command Line Usage"}),"\n",(0,l.jsx)(i.p,{children:"Build specific profile:"}),"\n",(0,l.jsx)(i.pre,{children:(0,l.jsx)(i.code,{className:"language-shell",children:"./build.sh marie-gateway-cpu\n./build.sh marie-cuda\n./build.sh all\n./build.sh 1\n./build.sh 2\n"})}),"\n",(0,l.jsx)(i.p,{children:"Build with custom version:"}),"\n",(0,l.jsx)(i.pre,{children:(0,l.jsx)(i.code,{className:"language-shell",children:"./build.sh --version 4.1.0 marie-cuda\n./build.sh -v 4.1.0 all\nMARIE_VERSION=4.1.0 ./build.sh marie-gateway-cpu\nMARIE_VERSION=4.2.0 ./build.sh marie-cuda\n"})}),"\n",(0,l.jsx)(i.p,{children:"Get help:"}),"\n",(0,l.jsx)(i.pre,{children:(0,l.jsx)(i.code,{className:"language-shell",children:"./build.sh --help\n./build.sh -h\n"})}),"\n",(0,l.jsx)(i.h2,{id:"version-management",children:"Version Management"}),"\n",(0,l.jsx)(i.p,{children:"Default version is 4.0.0\nSet custom versions using:"}),"\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:"Command line: ./build.sh --version 4.2.0 marie-cuda"}),"\n",(0,l.jsx)(i.li,{children:"Environment variable: export MARIE_VERSION=4.2.0"}),"\n",(0,l.jsx)(i.li,{children:"Inline: MARIE_VERSION=4.2.0 ./build.sh marie-cuda"}),"\n"]}),"\n",(0,l.jsx)(i.h2,{id:"examples",children:"Examples"}),"\n",(0,l.jsx)(i.p,{children:"Build single profile:"}),"\n",(0,l.jsx)(i.pre,{children:(0,l.jsx)(i.code,{className:"language-shell",children:"./build.sh marie-cuda\n"})}),"\n",(0,l.jsx)(i.p,{children:"Build all profiles:"}),"\n",(0,l.jsx)(i.pre,{children:(0,l.jsx)(i.code,{className:"language-shell",children:"./build.sh all\n"})}),"\n",(0,l.jsx)(i.p,{children:"Build with custom version:"}),"\n",(0,l.jsx)(i.pre,{children:(0,l.jsx)(i.code,{className:"language-shell",children:"./build.sh --version 4.1.0 marie-cuda\n"})}),"\n",(0,l.jsx)(i.h2,{id:"build-process",children:"Build Process"}),"\n",(0,l.jsx)(i.p,{children:"The script performs these steps:"}),"\n",(0,l.jsxs)(i.ol,{children:["\n",(0,l.jsx)(i.li,{children:"Prerequisites Check: Validates Docker installation"}),"\n",(0,l.jsx)(i.li,{children:"Post-commit Hook: Executes ./hooks/post-commit if available"}),"\n",(0,l.jsx)(i.li,{children:"Docker Build: Builds with no cache, host networking, automatic build arguments"}),"\n",(0,l.jsx)(i.li,{children:"Verification: Confirms successful image creation"}),"\n"]}),"\n",(0,l.jsx)(i.h2,{id:"build-arguments",children:"Build Arguments"}),"\n",(0,l.jsx)(i.p,{children:"The script automatically sets these Docker build arguments:"}),"\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:"PIP_TAG=standard"}),"\n",(0,l.jsx)(i.li,{children:"VCS_REF=git_commit_hash"}),"\n",(0,l.jsx)(i.li,{children:"BUILD_DATE=iso8601_timestamp"}),"\n",(0,l.jsx)(i.li,{children:"MARIE_VERSION=version"}),"\n",(0,l.jsx)(i.li,{children:"TARGETPLATFORM=linux/amd64"}),"\n"]}),"\n",(0,l.jsx)(i.h2,{id:"output",children:"Output"}),"\n",(0,l.jsx)(i.p,{children:"After successful builds you will have images like:"}),"\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:"marieai/marie-gateway:4.0.0-cpu"}),"\n",(0,l.jsx)(i.li,{children:"marieai/marie:4.0.0-cuda"}),"\n"]}),"\n",(0,l.jsx)(i.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,l.jsx)(i.p,{children:"Common issues:"}),"\n",(0,l.jsxs)(i.ol,{children:["\n",(0,l.jsx)(i.li,{children:"Docker not found: Ensure Docker is installed and in PATH"}),"\n",(0,l.jsx)(i.li,{children:"Dockerfile not found: Check that the Dockerfile exists at the specified path"}),"\n",(0,l.jsx)(i.li,{children:"Build context missing: Ensure patches/ and wheels/ directories exist"}),"\n",(0,l.jsx)(i.li,{children:"Permission denied: Make sure the script has execute permissions with chmod +x build.sh"}),"\n"]})]})}function h(e={}){const{wrapper:i}={...(0,r.R)(),...e.components};return i?(0,l.jsx)(i,{...e,children:(0,l.jsx)(o,{...e})}):o(e)}}}]);