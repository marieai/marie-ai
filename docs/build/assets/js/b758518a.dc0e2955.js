"use strict";(self.webpackChunkmare_ai=self.webpackChunkmare_ai||[]).push([[7778],{28453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>o});var i=s(96540);const r={},t=i.createContext(r);function l(e){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(t.Provider,{value:n},e.children)}},33708:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"extract/extract-overview","title":"Extract Engine \u2014 Entry Point","description":"Use this page as your single-stop overview of how the Extract engine fits together and how to build on it. It connects the concepts, the runtime lifecycle, and the configuration-driven patterns so you can confidently add new layouts, annotators, processors, and validators.","source":"@site/docs/extract/extract-overview.md","sourceDirName":"extract","slug":"/extract/extract-overview","permalink":"/docs/extract/extract-overview","draft":false,"unlisted":false,"editUrl":"https://github.com/marieai/marie-ai/tree/main/docs/docs/extract/extract-overview.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Component Registry","permalink":"/docs/extract/component-registry"},"next":{"title":"Role Hints","permalink":"/docs/extract/roles"}}');var r=s(74848),t=s(28453);const l={},o="Extract Engine \u2014 Entry Point",a={},c=[{value:"Mental Model",id:"mental-model",level:2},{value:"Key Concepts (Glossary)",id:"key-concepts-glossary",level:2},{value:"How It Flows (End-to-End)",id:"how-it-flows-end-to-end",level:2},{value:"What You Configure",id:"what-you-configure",level:2},{value:"Core Building Blocks",id:"core-building-blocks",level:2},{value:"Role Hints: The Routing Bridge",id:"role-hints-the-routing-bridge",level:2},{value:"Minimal Developer Walkthrough",id:"minimal-developer-walkthrough",level:2}];function d(e){const n={h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"extract-engine--entry-point",children:"Extract Engine \u2014 Entry Point"})}),"\n",(0,r.jsx)(n.p,{children:"Use this page as your single-stop overview of how the Extract engine fits together and how to build on it. It connects the concepts, the runtime lifecycle, and the configuration-driven patterns so you can confidently add new layouts, annotators, processors, and validators."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"mental-model",children:"Mental Model"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"You declare what to extract through configuration."}),"\n",(0,r.jsx)(n.li,{children:"The engine builds a layout-aware Template (layers/sections) and parses the document into structured regions."}),"\n",(0,r.jsx)(n.li,{children:"Annotators and region processors transform content into normalized structures (KV, tables)."}),"\n",(0,r.jsx)(n.li,{children:"Validators enforce shape and domain rules."}),"\n",(0,r.jsx)(n.li,{children:"A registry connects everything via stable names so components can be swapped and extended without changing the core engine."}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"key-concepts-glossary",children:"Key Concepts (Glossary)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Layout ID: Stable identifier for a document family (e.g., payer or form type) that selects a specific Template Builder (Layout Provider)."}),"\n",(0,r.jsx)(n.li,{children:"Layout Provider (Template Builder): Builds a Template composed of layers (bounded regions with fields/tables). Configuration-first; minimal code branching."}),"\n",(0,r.jsx)(n.li,{children:"Layer: A bounded section of the document driven by start/stop selectors; contains non-repeating fields and/or tables."}),"\n",(0,r.jsx)(n.li,{children:"Structured Region: The standardized in-memory representation of the parsed document sections (sections, tables, rows, etc.)."}),"\n",(0,r.jsxs)(n.li,{children:["SectionRole and role_hint:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"SectionRole: Layout placement (main/context)."}),"\n",(0,r.jsx)(n.li,{children:"role_hint: Semantic label (e.g., service_lines, claim_information) used to route processing and field mapping."}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"Annotator: Pluggable extractor that enriches or extracts data (LLM, LLM-table, rule-based, embedding/hybrid)."}),"\n",(0,r.jsx)(n.li,{children:"Region Processor: Transforms matched lines/spans into normalized structures (e.g., a service lines table)."}),"\n",(0,r.jsx)(n.li,{children:"Validator: Pluggable checks run at specific stages to ensure inputs and outputs meet expectations."}),"\n",(0,r.jsx)(n.li,{children:"Component Registry: The central registry that discovers, registers, and resolves parsers, validators, template builders, and region processors by name."}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"how-it-flows-end-to-end",children:"How It Flows (End-to-End)"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Select layout_id","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"The engine uses layout_id to resolve the registered Layout Provider."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Build the Template","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["The Layout Provider constructs layers:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Start/stop selectors define bounds."}),"\n",(0,r.jsx)(n.li,{children:"Non-repeating field mappings."}),"\n",(0,r.jsx)(n.li,{children:"Table configurations (headers, columns, row segment rules)."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Annotate (optional/when configured)","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Annotators run based on job request and layout config to extract fields/tables or enrich content."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Detect and parse regions","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Layer bounds create regions; the engine parses content within each region."}),"\n",(0,r.jsx)(n.li,{children:"Sections are created with roles and role hints. Structured Region is built."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Route by role_hint","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Sections tagged with role_hint are routed to the right processor or processing rule:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Example: service_lines \u2192 table processing."}),"\n",(0,r.jsx)(n.li,{children:"claim_information \u2192 KV parsing."}),"\n",(0,r.jsx)(n.li,{children:"remarks \u2192 custom remark logic."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Validate","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Validators run at configured stages (pre-processing, parse-output, post-processing) to enforce structure and domain rules."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Return results","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"The engine outputs structured, validated data (KVs, tables, totals, remarks) with page/line provenance."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"what-you-configure",children:"What You Configure"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Layouts:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Layers with anchors/selectors and field/table definitions."}),"\n",(0,r.jsx)(n.li,{children:"Layer order and dependencies when sections constrain one another."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Annotators:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Which annotators to run for a layout; model/prompt configs and expected outputs."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Role-driven processing:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Which sections get parsed as table/KV/custom based on role_hint."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Validators:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Which validators run at which stages to enforce schema and integrity."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Tip: Favor configuration-first; aim for minimal code branching per layout."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"core-building-blocks",children:"Core Building Blocks"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Layout Provider (per layout ID)","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Builds and orders layers."}),"\n",(0,r.jsx)(n.li,{children:"Encodes selectors (start/stop), field mappings, and table schemas."}),"\n",(0,r.jsx)(n.li,{children:"Returns a Template for runtime use."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Annotators","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Types: llm, llm_table, regex/rule-based, retrieval/embedding hybrid."}),"\n",(0,r.jsx)(n.li,{children:"Configured per layout with prompts/rules and validators."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Structured Region","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Sections with titles, roles, role_hint tags."}),"\n",(0,r.jsx)(n.li,{children:"Blocks like TableSeries with segments/rows."}),"\n",(0,r.jsx)(n.li,{children:"Provides APIs for accessing tables, sections, and spans."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Region Processors","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Named processors that turn matched spans into typed structures."}),"\n",(0,r.jsx)(n.li,{children:"Attach provenance and role hints for downstream consumers."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Validators","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Pluggable checks for structure, schema, and domain rules."}),"\n",(0,r.jsx)(n.li,{children:"Selectively attached per annotator or flow stage."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Component Registry","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Register and resolve all components by stable names."}),"\n",(0,r.jsx)(n.li,{children:"Supports core and external modules; designed for extension."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"role-hints-the-routing-bridge",children:"Role Hints: The Routing Bridge"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"role_hint tags sections with business semantics (service_lines, claim_information, claim_totals, remarks)."}),"\n",(0,r.jsxs)(n.li,{children:["The engine or configured processing rules use role_hint to:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Choose parse method (table, kv, custom)."}),"\n",(0,r.jsx)(n.li,{children:"Apply field mappings scoped to that role."}),"\n",(0,r.jsx)(n.li,{children:"Trigger specialized business logic or validation."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Best practices:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Use descriptive, stable snake_case names."}),"\n",(0,r.jsx)(n.li,{children:"Keep naming consistent across layouts to maximize reuse."}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"minimal-developer-walkthrough",children:"Minimal Developer Walkthrough"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Add or update a Layout Provider for a new document family:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Choose a new layout_id if documents change meaningfully to avoid brittle branching."}),"\n",(0,r.jsx)(n.li,{children:"Define layers with clear start/stop anchors."}),"\n",(0,r.jsx)(n.li,{children:"Map non-repeating fields and specify table definitions (headers, columns)."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Use role_hint to connect configuration to processing:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Tag sections like claim_information, service_lines, claim_totals, remarks."}),"\n",(0,r.jsx)(n.li,{children:"Configure processing rules or processors that respond to those role hints."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Add annotators (if needed):","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Pick type: llm for flexible fields; llm_table for structured tables; regex for deterministic patterns; hybrid for robust matching."}),"\n",(0,r.jsx)(n.li,{children:"Configure prompts/rules and expected output format; attach validators."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Add validators:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Attach generic structure validators and domain-specific ones (e.g., tables, claims)."}),"\n",(0,r.jsx)(n.li,{children:"Fail fast on missing required fields or malformed structures."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Test:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Validate anchoring across varied samples."}),"\n",(0,r.jsx)(n.li,{children:"Check field/table extraction stability and performance."}),"\n",(0,r.jsx)(n.li,{children:"Ensure validators produce actionable diagnostics."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);