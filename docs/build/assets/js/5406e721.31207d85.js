"use strict";(self.webpackChunkmare_ai=self.webpackChunkmare_ai||[]).push([[2801],{22731:(e,r,s)=>{s.r(r),s.d(r,{assets:()=>l,contentTitle:()=>d,default:()=>x,frontMatter:()=>n,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"api/generated/marie.boxes.BoxProcessorUlimDit","title":"marie.boxes.BoxProcessorUlimDit","description":"class marie.boxes.BoxProcessorUlimDit(workdir str = \'/mnt/marie/model_zoo\', cuda bool = True)","source":"@site/docs/api/generated/marie.boxes.BoxProcessorUlimDit.md","sourceDirName":"api/generated","slug":"/api/generated/marie.boxes.BoxProcessorUlimDit","permalink":"/docs/api/generated/marie.boxes.BoxProcessorUlimDit","draft":false,"unlisted":false,"editUrl":"https://github.com/marieai/marie-ai/tree/main/docs/docs/api/generated/marie.boxes.BoxProcessorUlimDit.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"marie.document","permalink":"/docs/api/document"},"next":{"title":"marie.boxes.PSMode","permalink":"/docs/api/generated/marie.boxes.PSMode"}}');var t=s(74848),o=s(28453);const n={},d="marie.boxes.BoxProcessorUlimDit",l={},c=[{value:"<em>class</em> marie.boxes.BoxProcessorUlimDit(work_dir: str = &#39;/tmp/boxes&#39;, models_dir: str = &#39;/mnt/marie/model_zoo&#39;, cuda: bool = False, refinement: bool = True)",id:"class-marieboxesboxprocessorulimditwork_dir-str--tmpboxes-models_dir-str--mntmariemodel_zoo-cuda-bool--false-refinement-bool--true",level:3},{value:"__init__(work_dir: str = &#39;/tmp/boxes&#39;, models_dir: str = &#39;/mnt/marie/model_zoo&#39;, cuda: bool = False, refinement: bool = True)",id:"__init__work_dir-str--tmpboxes-models_dir-str--mntmariemodel_zoo-cuda-bool--false-refinement-bool--true",level:4},{value:"Methods",id:"methods",level:3},{value:"Attributes",id:"attributes",level:3}];function a(e){const r={a:"a",code:"code",em:"em",h1:"h1",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.header,{children:(0,t.jsx)(r.h1,{id:"marieboxesboxprocessorulimdit",children:"marie.boxes.BoxProcessorUlimDit"})}),"\n",(0,t.jsxs)(r.h3,{id:"class-marieboxesboxprocessorulimditwork_dir-str--tmpboxes-models_dir-str--mntmariemodel_zoo-cuda-bool--false-refinement-bool--true",children:[(0,t.jsx)(r.em,{children:"class"})," marie.boxes.BoxProcessorUlimDit(work_dir: str = '/tmp/boxes', models_dir: str = '/mnt/marie/model_zoo', cuda: bool = False, refinement: bool = True)"]}),"\n",(0,t.jsx)(r.p,{children:"Document text box processor using DIT model from ULIM."}),"\n",(0,t.jsx)(r.p,{children:"EXAMPLE USAGE"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-python",children:'from marie.boxes import BoxProcessorUlimDit\nfrom marie.boxes.box_processor import PSMode\n\nbox = BoxProcessorUlimDit(\n    models_dir="../../model_zoo/unilm/dit/text_detection",\n    cuda=True,\n)\n(\n    boxes,\n    fragments,\n    lines,\n    _,\n    lines_bboxes,\n) = box.extract_bounding_boxes("gradio", "field", image, PSMode.SPARSE)\n\nbboxes_img = visualize_bboxes(image, boxes, format="xywh")\nlines_img = visualize_bboxes(image, lines_bboxes, format="xywh")\n'})}),"\n",(0,t.jsx)(r.h4,{id:"__init__work_dir-str--tmpboxes-models_dir-str--mntmariemodel_zoo-cuda-bool--false-refinement-bool--true",children:"__init__(work_dir: str = '/tmp/boxes', models_dir: str = '/mnt/marie/model_zoo', cuda: bool = False, refinement: bool = True)"}),"\n",(0,t.jsx)(r.p,{children:"Initialize"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:"Parameters:"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:"work_dir"})," \u2013 Working directory"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:"models_dir"})," \u2013 Models directory"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:"cuda"})," \u2013 Is CUDA processing enabled"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:"config"})," \u2013 Configuration map"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(r.h3,{id:"methods",children:"Methods"}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsxs)(r.th,{children:[(0,t.jsx)(r.a,{href:"#marie.boxes.BoxProcessorUlimDit.__init__",children:(0,t.jsx)(r.code,{children:"__init__"})}),"([work_dir, models_dir, cuda, ...])"]}),(0,t.jsx)(r.th,{children:"Initialize"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsxs)(r.td,{children:[(0,t.jsx)(r.code,{children:"describe_handle"}),"()"]}),(0,t.jsx)(r.td,{children:"Customized describe handler"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsxs)(r.td,{children:[(0,t.jsx)(r.code,{children:"explain_handle"}),"(data_preprocess, raw_data)"]}),(0,t.jsx)(r.td,{children:"Captum explanations handler"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsxs)(r.td,{children:[(0,t.jsx)(r.code,{children:"extract_bounding_boxes"}),"(_id, key, img[, psm, ...])"]}),(0,t.jsx)(r.td,{children:"Extract bounding boxes for specific image, try to predict line number representing each bounding box."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsxs)(r.td,{children:[(0,t.jsx)(r.code,{children:"handle"}),"(data, context)"]}),(0,t.jsx)(r.td,{children:"Entry point for default handler. It takes the data from the input request and returns"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsxs)(r.td,{children:[(0,t.jsx)(r.code,{children:"inference"}),"(data, *args, **kwargs)"]}),(0,t.jsx)(r.td,{children:"The Inference Function is used to make a prediction call on the given input request."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsxs)(r.td,{children:[(0,t.jsx)(r.code,{children:"initialize"}),"(context)"]}),(0,t.jsx)(r.td,{children:"Initialize function loads the model.pt file and initialized the model object."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsxs)(r.td,{children:[(0,t.jsx)(r.code,{children:"postprocess"}),"(data)"]}),(0,t.jsx)(r.td,{children:"The post process function makes use of the output from the inference and converts into a Torchserve supported response output."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsxs)(r.td,{children:[(0,t.jsx)(r.code,{children:"preprocess"}),"(data)"]}),(0,t.jsx)(r.td,{children:"Preprocess function to convert the request input to a tensor(Torchserve supported format)."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsxs)(r.td,{children:[(0,t.jsx)(r.code,{children:"psm_line"}),"(image)"]}),(0,t.jsx)(r.td,{children:"Treat the image as a single text line."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsxs)(r.td,{children:[(0,t.jsx)(r.code,{children:"psm_multiline"}),"(image)"]}),(0,t.jsx)(r.td,{children:"Treat the image as a single word."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsxs)(r.td,{children:[(0,t.jsx)(r.code,{children:"psm_raw_line"}),"(image)"]}),(0,t.jsx)(r.td,{children:"Treat the image as a single text line."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsxs)(r.td,{children:[(0,t.jsx)(r.code,{children:"psm_sparse"}),"(image[, bbox_optimization, ...])"]}),(0,t.jsx)(r.td,{children:"Find as much text as possible (default)."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsxs)(r.td,{children:[(0,t.jsx)(r.code,{children:"psm_sparse_step"}),"(image, adj_x, adj_y)"]}),(0,t.jsx)(r.td,{children:"Perform a step in the PSM sparse pipeline."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsxs)(r.td,{children:[(0,t.jsx)(r.code,{children:"psm_word"}),"(image)"]}),(0,t.jsx)(r.td,{children:"Treat the image as a single word."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsxs)(r.td,{children:[(0,t.jsx)(r.code,{children:"unload"}),"()"]}),(0,t.jsx)(r.td,{children:"Unload the model from GPU/CPU"})]})]})]}),"\n",(0,t.jsx)(r.h3,{id:"attributes",children:"Attributes"}),"\n",(0,t.jsx)(r.table,{children:(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:(0,t.jsx)(r.code,{children:"REGISTRY"})}),(0,t.jsx)(r.th,{})]})})})]})}function x(e={}){const{wrapper:r}={...(0,o.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},28453:(e,r,s)=>{s.d(r,{R:()=>n,x:()=>d});var i=s(96540);const t={},o=i.createContext(t);function n(e){const r=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function d(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:n(e.components),i.createElement(o.Provider,{value:r},e.children)}}}]);