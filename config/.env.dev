PYTHONUNBUFFERED=1;

# ############### Marie-AI System Configuration ###############

# Global Configuration
STACK_NAME=dev
PROJECT_NAME=marie

# ############### Gateway Configuration ###############

GATEWAY_IMAGE_TAG=4.0.0-cpu
GATEWAY_CONFIG_TAG=marie-gateway-4.0.0.yml
GATEWAY_LOG_LEVEL=DEBUG

GATEWAY_CONFIG_PATH=/mnt/data/marie-ai/config
GATEWAY_MODEL_PATH=/mnt/data/marie-ai/model_zoo
# This should have been copied from the gateway image during build
GATEWAY_POLICY_PATH=/mnt/data/marie-ai/config/service/im-policy.xml

# ############### Extract Executor Configuration ###############

EXTRACT_IMAGE_TAG=4.0.0-cuda
EXTRACT_CONFIG_TAG=marie-extract-4.0.0.yml
EXTRACT_LOG_LEVEL=DEBUG
EXTRACT_REPLICAS=1

EXTRACT_CONFIG_PATH=/mnt/data/marie-ai/config
EXTRACT_MODEL_PATH=/mnt/data/marie-ai/model_zoo
EXTRACT_CACHE_PATH=/mnt/data/marie-ai/model_zoo/cache/huggingface/hub
EXTRACT_POLICY_PATH=/mnt/data/marie-ai/config/service/im-policy.xml

# ############### Debug Configuration ###############

# Uncomment for debugging
# MARIE_DEBUG=1
# MARIE_DEBUG_PORT=5678
# MARIE_DEBUG_WAIT_FOR_CLIENT=1
# MARIE_DEBUG_HOST=0.0.0.0

# ############### Network Configuration ###############

# Docker network name
MARIE_NETWORK=marie_default

# ############### S3 SERVICE ###############

# MinIO Credentials
MINIO_ROOT_USER=marieadmin
MINIO_ROOT_PASSWORD=marietopsecret

# MinIO Access Keys
MARIE_ACCESS_KEY=MARIEACCESSKEY
MARIE_SECRET_ACCESS_KEY=MARIESECRETACCESSKEY

# Postgres
POSTGRES_VERSION=16
POSTGRES_USER=postgres
POSTGRES_PASSWORD=123456
POSTGRES_HOSTNAME=marie-psql-server
POSTGRES_HOST=marie-psql-server

# AWS
AWS_MQ_HOSTNAME=HOSTNAME
AWS_MQ_PASSWORD=PASSWORD
AWS_MQ_USERNAME=USERNAME
#JINA_MP_START_METHOD=spawn
#PROTOCOL_BUFFERS_PYTHON_IMPLEMENTATION=python

# RabbitMQ ( this is used by default / not real password )
RABBIT_MQ_HOSTNAME=marie-rabbitmq
RABBIT_MQ_USERNAME=marie
RABBIT_MQ_PASSWORD=rycerz
RABBIT_MQ_PORT=5672

# S3 Storage
S3_ACCESS_KEY_ID=MARIEACCESSKEY
S3_ADDRESSING_STYLE=path
S3_BUCKET_NAME=marie
S3_ENDPOINT_URL=http://marie-s3-server:8000
S3_REGION=us-east-1
S3_SECRET_ACCESS_KEY=MARIESECRETACCESSKEY


# GRPC debug https://github.com/grpc/grpc/blob/master/TROUBLESHOOTING.md
#GRPC_TRACE=api
#GRPC_VERBOSITY=debug

# ############### ClickHouse Configuration ###############
# Column-oriented analytics database (used by marie-ai)

CLICKHOUSE_HTTP_PORT=8123
CLICKHOUSE_NATIVE_PORT=9000
CLICKHOUSE_MYSQL_PORT=9004
CLICKHOUSE_USER=default
CLICKHOUSE_PASSWORD=
CLICKHOUSE_DB=marie
CLICKHOUSE_ACCESS_MANAGEMENT=1
CLICKHOUSE_MAX_MEMORY=4000000000
CLICKHOUSE_MAX_MEMORY_USER=3000000000
CLICKHOUSE_MEMORY_LIMIT=8G
CLICKHOUSE_MEMORY_RESERVATION=2G

# ############### Gitea Configuration ###############
# Self-hosted Git service (used by marie-studio)

GITEA_HTTP_PORT=3001
GITEA_SSH_PORT=2222
GITEA_DOMAIN=localhost
GITEA_ROOT_URL=http://localhost:3001
GITEA_DB_NAME=gitea
GITEA_LOG_LEVEL=info
GITEA_INSTALL_LOCK=true
GITEA_DISABLE_REGISTRATION=false
GITEA_REQUIRE_SIGNIN=false
# Generate with: openssl rand -base64 32
GITEA_SECRET_KEY=
# Default admin user (created automatically on first bootstrap)
GITEA_ADMIN_USER=marie
GITEA_ADMIN_PASSWORD=rycerz
GITEA_ADMIN_EMAIL=marie@marie.local
# Default repositories (created automatically on first bootstrap)
# Format: name:description (comma-separated for multiple repos)
GITEA_DEFAULT_REPOS="planners:Query planners for Marie AI,prompts:Prompt templates and configurations,deployments:Deployment configurations and scripts"
# OAuth2 application for Marie Studio
GITEA_OAUTH_APP_NAME=marie-studio
GITEA_OAUTH_REDIRECT_URI=http://localhost:5173/api/auth/gitea/connect/callback

# ############### LiteLLM Configuration ###############
# LLM proxy server for AI model routing
# Note: Database-free mode by default. Set LITELLM_DATABASE_URL to enable DB storage.

LITELLM_MASTER_KEY=sk-1234
LITELLM_SALT_KEY=sk-1234
# Uncomment below to enable database storage:
# LITELLM_DATABASE_URL=postgresql://postgres:123456@marie-psql-server:5432/litellm
# LITELLM_STORE_MODEL_IN_DB=true
LITELLM_LOG=INFO
LITELLM_PORT=4000

# ############### ClickStack Configuration ###############
# Observability stack powered by ClickHouse (logs, traces, metrics)

# HyperDX UI
HYPERDX_UI_PORT=8080
HYPERDX_LOG_LEVEL=info
HYPERDX_API_KEY=
HYPERDX_MEMORY_LIMIT=4G
HYPERDX_MEMORY_RESERVATION=1G
# Default admin user (created automatically on first bootstrap)
# Password must be: 12+ chars, 1 uppercase, 1 lowercase, 1 number, 1 special char
HYPERDX_ADMIN_EMAIL=marie@marie.local
HYPERDX_ADMIN_PASSWORD=MarieAI@2026!

# ClickStack ClickHouse connection (uses existing marie-clickhouse)
CLICKSTACK_CLICKHOUSE_HOST=marie-clickhouse

# OpenTelemetry ports
OTEL_GRPC_PORT=4317
OTEL_HTTP_PORT=4318
FLUENTD_PORT=24225

# Additional OTel collector ports (when using --profile collector)
OTEL_COLLECTOR_GRPC=4327
OTEL_COLLECTOR_HTTP=4328

# OTLP Exporter configuration for Python applications
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318
OTEL_EXPORTER_OTLP_PROTOCOL=http/protobuf
OTEL_SERVICE_NAME=marie-ai
OTEL_RESOURCE_ATTRIBUTES=service.namespace=marie-ai,deployment.environment=dev
